%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FONTS

\usepackage{fontspec} % needed to set main font
\setmainfont{STIX Two Text}

\usepackage{unicode-math} % needed to set math font -- also replaces amssymb
\setmathfont{STIX Two Math}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% PAGE LAYOUT

\usepackage{parskip} % skip line after each paragraph, and don't indent

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% TEXT MACROS

\newcommand{\dfntxt}[1]{{\textbf{\textit{#1}}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% MATH MACROS

\newcommand{\N}{{\symbb{N}}}
\newcommand{\Z}{{\symbb{Z}}}
\newcommand{\Q}{{\symbb{Q}}}
\newcommand{\R}{{\symbb{R}}}
\newcommand{\C}{{\symbb{C}}}

\newcommand{\va}{{\symbf{a}}}
\newcommand{\vb}{{\symbf{b}}}
\newcommand{\vc}{{\symbf{c}}}
\newcommand{\vd}{{\symbf{d}}}
\newcommand{\ve}{{\symbf{e}}}
\newcommand{\vf}{{\symbf{f}}}
\newcommand{\vg}{{\symbf{g}}}
\newcommand{\vh}{{\symbf{h}}}
\newcommand{\vi}{{\symbf{i}}}
\newcommand{\vj}{{\symbf{j}}}
\newcommand{\vk}{{\symbf{k}}}
\newcommand{\vl}{{\symbf{l}}}
\newcommand{\vm}{{\symbf{m}}}
\newcommand{\vn}{{\symbf{n}}}
\newcommand{\vo}{{\symbf{o}}}
\newcommand{\vp}{{\symbf{p}}}
\newcommand{\vq}{{\symbf{q}}}
\newcommand{\vr}{{\symbf{r}}}
\newcommand{\vs}{{\symbf{s}}}
\newcommand{\vt}{{\symbf{t}}}
\newcommand{\vu}{{\symbf{u}}}
\newcommand{\vv}{{\symbf{v}}}
\newcommand{\vw}{{\symbf{w}}}
\newcommand{\vx}{{\symbf{x}}}
\newcommand{\vy}{{\symbf{y}}}
\newcommand{\vz}{{\symbf{z}}}

\newcommand{\abs}[1]{{\left\lvert {#1} \right\rvert}}
\newcommand{\norm}[1]{{\left\lVert {#1} \right\rVert}}
\newcommand{\alg}[1]{{\langle {#1} \rangle}}

\newcommand{\powerset}{{\symcal{P}}}

\DeclareMathOperator{\id}{id}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% BOXES

\usepackage{tcolorbox}
\tcbuselibrary{breakable}
\tcbuselibrary{skins}

\newtcolorbox{tcdfnbox}[1]{
	enhanced,
	breakable,
	coltext=black,
	coltitle=white,
	colframe=black,
	colbacktitle=black,
	left=2.5mm,
	right=2.5mm,
	grow to left by=4mm,
	grow to right by=4mm,
	before upper={
		\setlength{\parskip}{0.375\baselineskip}
		\setlength{\abovedisplayskip}{0.375\baselineskip}
		\setlength{\belowdisplayskip}{0.375\baselineskip}
		\setlength{\abovedisplayshortskip}{0.125\baselineskip}
		\setlength{\belowdisplayshortskip}{0.375\baselineskip}
	},
	title={\textbf{Definition: {#1}}},
	attach boxed title to top text left={yshift=-2mm},
	boxed title style={size=small}
}

\newtcolorbox{tcthmbox}[1]{
	enhanced,
	breakable,
	coltext=black,
	coltitle=white,
	colframe=black,
	colbacktitle=black,
	left=2.5mm,
	right=2.5mm,
	grow to left by=4mm,
	grow to right by=4mm,
	before upper={
		\setlength{\parskip}{0.375\baselineskip}
		\setlength{\abovedisplayskip}{0.375\baselineskip}
		\setlength{\belowdisplayskip}{0.375\baselineskip}
		\setlength{\abovedisplayshortskip}{0.125\baselineskip}
		\setlength{\belowdisplayshortskip}{0.375\baselineskip}
	},
	before lower={
		\setlength{\parskip}{0.375\baselineskip}
		\setlength{\abovedisplayskip}{0.375\baselineskip}
		\setlength{\belowdisplayskip}{0.375\baselineskip}
		\setlength{\abovedisplayshortskip}{0.125\baselineskip}
		\setlength{\belowdisplayshortskip}{0.375\baselineskip}
	},
	title={\textbf{{#1}}},
	attach boxed title to top text left={yshift=-2mm},
	boxed title style={size=small}
}

\usepackage{tocloft}

\newcommand{\listdefinitionname}{List of Definitions}
\newlistof{definition}{dfn}{\listdefinitionname}

\newenvironment{dfnbox}[1]{
	\addcontentsline{dfn}{definition}{#1}
	\begin{tcdfnbox}{#1}
}{
	\end{tcdfnbox}
}

\newcommand{\listtheoremname}{List of Theorems}
\newlistof{theorem}{thm}{\listtheoremname}

\newenvironment{thmbox}[1]{
	\addcontentsline{thm}{theorem}{#1}
	\begin{tcthmbox}{#1}
}{
	\end{tcthmbox}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LISTS

\usepackage{enumitem} % needed to define new list environments

\newlist{boxitems}{itemize}{2} % condensed list for use inside tcolorboxes
\setlist[boxitems]{
	label=\textbullet,
	parsep=0.125\baselineskip
}
